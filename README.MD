
# üé¨ **Video Streaming Service**

## üöÄ **Como Executar**

Para rodar o programa, execute o arquivo principal com o comando:

```bash
python main.py
```

---

## ‚ú® **Funcionalidades**

- üìö **Consultar biblioteca de conte√∫do** ‚úÖ
- üë§ **Configura√ß√µes de usu√°rio** ‚úÖ
- ü§ñ **Recomenda√ß√µes personalizadas** ‚òëÔ∏è
- üì± **Streaming em m√∫ltiplos dispositivos** ‚òëÔ∏è
- ‚ö° **Otimiza√ß√£o de banda larga** ‚úÖ
- ‚≠ê **Marcar conte√∫do e hist√≥rico de visualiza√ß√£o** ‚úÖ
- üìù **Revis√µes e avalia√ß√µes de conte√∫do** ‚òëÔ∏è
- üì¢ **Integra√ß√£o com an√∫ncios** ‚úÖ
- üîí **Controle parental** ‚úÖ 
- üë• **Gerenciamento de usu√°rio** ‚úÖ

## üõ°Ô∏è **Tratamento de Exce√ß√µes**

Para aumentar a robustez e a estabilidade do aplicativo, diversas rotinas de tratamento de exce√ß√µes foram implementadas. Elas garantem que o programa n√£o pare inesperadamente e forne√ßa feedback √∫til ao usu√°rio.

- **Valida√ß√£o de Entrada do Usu√°rio (`ValueError`)**:
  - Captura entradas num√©ricas inv√°lidas (ex: letras em vez de n√∫meros) em todos os menus, como na sele√ß√£o de perfis (`parental_control.py`), escolha de m√≠dias (`library_management.py`), defini√ß√£o de notas (`rating_and_reviews.py`) e menus de streaming (`multi_device.py`).
  - Garante que a cria√ß√£o de usu√°rios (`user_management.py`) falhe graciosamente se os dados n√£o passarem nas regras de valida√ß√£o (gerado pelo `UserBuilder` e capturado em `main.py` e `predefinitions.py`).

- **Erros de Leitura de Arquivo (`FileNotFoundError`, `json.JSONDecodeError`, `IOError`)**:
  - Protege o carregamento dos cat√°logos de m√≠dias (`midias.json`) e an√∫ncios (`anuncios.json`). Se um arquivo n√£o for encontrado, estiver corrompido (JSON inv√°lido) ou houver um erro de permiss√£o de leitura, o sistema informar√° o erro e continuar√° executando com um cat√°logo vazio, em vez de parar. (Implementado em `library_management.py` e `ads_management.py`).

- **Erros de L√≥gica e Dados (`AttributeError`, `KeyError`, `IndexError`)**:
  - Previne falhas caso um objeto (como `usuario` ou `perfil`) n√£o tenha um atributo esperado (ex: `usuario.plano`). Isso √© comum em fun√ß√µes de `update` do padr√£o Observer (`multi_device.py`, `bandwidth_optimization.py`) e durante a renderiza√ß√£o de estados do player (`player_states.py`).
  - Trata `KeyError` ao tentar acessar dados de um dicion√°rio que podem n√£o existir, como ao exibir avalia√ß√µes (`rating_and_reviews.py`) ou ao definir restri√ß√µes de idade (`parental_control.py`).
  - Trata `IndexError` ao tentar selecionar um an√∫ncio de uma lista vazia (`ads_management.py`).

- **Erros de Sistema e Recursos (`OSError`, `RuntimeError`)**:
  - Captura `OSError` na fun√ß√£o `limpar_tela()` (`utility.py`), permitindo que o programa continue mesmo se n√£o conseguir limpar o console.
  - Captura `RuntimeError` que pode ocorrer ao iniciar uma `threading.Thread` no sistema de an√∫ncios (`ads_management.py`).

- **Interrup√ß√£o do Usu√°rio (`KeyboardInterrupt`)**:
  - Captura `Ctrl+C` nos menus principais (`main.py`) para permitir uma sa√≠da limpa e amig√°vel do programa, em vez de um traceback de erro.

---

## üõ†Ô∏è‚òëÔ∏è **Refatora√ß√£o**

### ‚öíÔ∏è **Mudan√ßas significativas**
- **Mudan√ßa de armazenamento**: Os an√∫ncios e m√≠dias dispon√≠veis agora se encontram num .JSON √† parte da l√≥gica do programa.
- **Melhoria da l√≥gica de recomenda√ß√£o**: As recomenda√ß√µes do sistema agora sugerem t√≠tulos similares, e n√£o s√≥ um g√™nero. Al√©m de que, para aqueles que n√£o t√™m hist√≥rico de exibi√ß√£o, ele recomenda os mais "populares".
- **Avalia√ß√£o**: O usu√°rio, antes de fazer uma avalia√ß√£o, tem que ter assistido a m√≠dia em quest√£o. Al√©m disso, agora o sistema possui um ID para cada filme/s√©rie; ou seja, para cada t√≠tulo, h√° uma avalia√ß√£o referente √† ele. 
- **Servi√ßo de v√°rios dispositivos**: Assim como num sistema real de streaming, o n√∫mero de aparelhos simult√¢neos em execu√ß√£o √© limitado. Se o n√∫mero exceder, ent√£o nao √© poss√≠vel iniciar uma sess√£o nova. (Implementa√ß√£o meio inutil, mas meh).
### üßÆ **Mudan√ßas menores**
- **Transi√ß√µes**: O tempo de transi√ß√£o entre "telas" era muito grande e custoso. Esse mesmo tempo foi reduzido.
- **Cancelar a√ß√£o**: Apesar do sistema j√° dar a possibilidade de abortar determinada a√ß√£o, ele nunca informa que voc√™ pode usar o enter para cancelar uma atividade. Esses prints foram implementados. 
- **Perfil Inexistente**: O sistema agora sabe quando um perfil digitado n√£o existe, e informa isso ao usu√°rio.
- **Hist√≥rico por perfil**: Em alguns casos, o sistema n√£o sabia diferenciar qual perfil havia assistido determinado conte√∫do; e ent√£o dava o mesmo hist√≥rio para todos os perfis. 
- **Caixas de texto**: Apenas uma corre√ß√£o visual. O programa agora imprime as caixas de informa√ß√£o de modo mais arrumado.

--- 

## üß± **Padr√µes criacionais**
- **Singleton**: Aplicado na classe `Avaliacoes` (`rating_and_reviews.py`), esse padr√£o garante que exista somente uma √∫nica inst√¢ncia dessa classe em toda a aplica√ß√£o, o que funciona como um ponto de acesso global para as avalia√ß√µes de conte√∫do. Desse modo, qualquer parte do sistema que precisa registrar ou consultar uma avalia√ß√£o vai estar interagindo com o mesmo e √∫nico reposit√≥rio de dados, garantindo a consist√™ncia e integridade das informa√ß√µes das reviews. 
- **Factory Method**: Usado na classe `MidiaFactory` (`library_management.py`) para centralizar a cria√ß√£o de tipos diferentes de midias (`Filme`, `Serie`, `Documentario`, etc.). Em vez do c√≥digo do cliente decidir qual classe instanciar, ele vai somente enviar os dados para a "f√°brica", que analisa o "tipo" de m√≠dia e retorna o objeto certo. Essa pr√°tica desacopla o sistema, o que facilita a adi√ß√£o de novos tipos de conte√∫dos no futuro, j√° que as mudan√ßas ficam concentradas somente na f√°brica. 
- **Builder**: Implementado na classe `UserBuilder` (`user_management.py`) para simplificar a cria√ß√£o de objetos `User` complexos. Ele permite construir o objeto passo a passo atr√°ves de m√©todos encadeados, como `com_nome()` e `com_email()`, sendo finalizada com o m√©todo `build()`. Aqui n√≥s separamos a l√≥gica de constru√ß√£o do objeto final, o que torna a cria√ß√£o de novos usu√°rios mais leg√≠vel e mais organizada, especialmente quando √© para se lidar com m√∫ltiplos atributos e regras de valida√ß√£o.
---
## üë§ **Padr√µes comportamentais**
- **Observer**: Usado para notificar mudan√ßas de estado. A classe `User` (`user_management.py`) atua como o `Subject` (Sujeito). As classes `StreamingSession` (`multi_device.py`) e `BandaLarga` (`bandwidth_optimization.py`) atuam como `Observers` (Observadores). Quando um usu√°rio muda seu plano de assinatura (ex: de "Gratuito" para "Premium"), o `User` notifica seus observadores, que reagem automaticamente para atualizar o limite de telas ou as configura√ß√µes de qualidade de v√≠deo.
- **Strategy**: Permite definir uma fam√≠lia de algoritmos e torn√°-los intercambi√°veis. √â usado pelo sistema de recomenda√ß√µes. A classe `Recomendacoes` (`recommendations.py`) √© o "Contexto" que mant√©m uma refer√™ncia a uma estrat√©gia. As classes `GenreBasedStrategy`, `TrendingStrategy`, e `SurpriseMeStrategy` (`recommendation_strategies.py`) s√£o as estrat√©gias concretas, permitindo ao usu√°rio alterar o tipo de recomenda√ß√£o que deseja receber em tempo de execu√ß√£o.
- **State**: Permite que um objeto altere seu comportamento quando seu estado interno muda. Implementado no player de v√≠deo (`player_states.py`). A classe `Player` √© o "Contexto" que delega o comportamento para objetos de estado concretos (`PausedState`, `PlayingState`, `StoppedState`), que implementam a interface comum `PlayerState`. Isso elimina grandes blocos condicionais no player e organiza a l√≥gica de "play", "pause" e "stop" de forma limpa.
---

## üé¢ **Padr√µes estruturais**
- **Decorator**: Permite adicionar novas responsabilidades a objetos dinamicamente. Usado para adicionar recursos extras √†s m√≠dias (`library_management.py`). As classes `AudioDescricaoDecorator` e `DublagemDecorator` "embrulham" um objeto `Midia` (como `Filme` ou `Serie`) para adicionar novos recursos (como "Audiodescri√ß√£o") sem alterar a classe original da m√≠dia.
- **Adapter**: Permite que interfaces incompat√≠veis trabalhem juntas. Usado em `library_management.py` com a classe `ExternalMediaAdapter`. Ela "traduz" dados de uma fonte externa simulada (que usa chaves como "Title" e "Runtime") para o formato que a `MidiaFactory` interna espera (com chaves como "titulo" e "tempo_duracao"), permitindo que o sistema carregue m√≠dias de diferentes fontes de forma transparente.
- **Facade**: Fornece uma interface unificada e simplificada para um conjunto complexo de interfaces em um subsistema. Fun√ß√µes como `Explorar_Conteudo` (`library_management.py`) e os menus em `main.py` atuam como Facades, escondendo a complexidade de buscar no cat√°logo, lidar com perfis, iniciar o player e registrar no hist√≥rico, tudo atrav√©s de uma simples interface de menu.
---
## üèóÔ∏è **Estrutura de Projeto**

### üèõÔ∏è **Classes:**

- **User**: Template para ministrar, administrar e utilizar diferentes usu√°rios.
- **Perfil**: Template para diferentes perfis em cada usu√°rio distinto.
- **ConjuntoMidias**: Template onde teremos todos os tipos de m√≠dia poss√≠veis e a partir delas realizar fun√ß√µes como explorar o conte√∫do.
- **Midia**: Template que ter√° diversas outras subclasses referentes ao tipo de m√≠dia, al√©m de fun√ß√µes b√°sicas como exibir informa√ß√µes de tal m√≠dia.

  **Subclasses de M√≠dia:**
  - **Filme**: Para m√≠dias que s√£o filmes.
  - **Documentario**: Para m√≠dias que s√£o document√°rios.
  - **Serie**: Para m√≠dias que s√£o s√©ries.
  - **Anime**: Para m√≠dias que s√£o animes.
  - **Novela**: Para m√≠dias que s√£o novelas.
  - **Historico**: Realiza o controle do hist√≥rico de exibi√ß√£o, permitindo funcionalidades como limpar hist√≥rico ou acess√°-lo para cada perfil (vai ser um objeto de um atributo da classe Perfil).

- **Recomendacoes**: Template para sugerir conte√∫dos espec√≠ficos baseado no g√™nero assistido pelo perfil (vai ser um objeto de um atributo da classe Perfil).
- **Anuncio**: Template para fazer a organiza√ß√£o e manunten√ß√£o de an√∫ncios na plataforma de acordo com o plano 
- **Marcar**: Template para marcar conte√∫dos espec√≠ficos para assistir mais tarde e influenciar na recomenda√ß√£o do usu√°rio
- **Plano**: Template para melhorar o gerenciamento de plano com pagamentos e ser utilizado no user_management, al√©m de influenciar na parte dos an√∫ncios devido ao plano escolhido com regras pre-estabelecidas;
- **Devices**: Template para a organiza√ß√£o de streaming em multiplataforma;
- **BandaLarga**: Template para a manunten√ß√£o da banda larga e a qualidade da transmiss√£o enquanto a pessoa assiste;
- **Avaliacoes**: Template para avalia√ß√µes e reviews sobre um certo conte√∫do em uma mini-rede social;
